<!DOCTYPE html>
<html lang="en" class="bg-gray-950 text-white">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Container Security Workshop | D. Chandler Prince</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    html { font-family: 'Inter', sans-serif; }
    ::selection { background: #2563eb; color: #fff; }
    /* Style for code blocks with copy buttons */
    .code-block {
      position: relative;
      background-color: #030712; /* gray-950 */
      border-radius: 0.5rem; /* rounded-lg */
      border: 1px solid #374151; /* border-gray-700 */
    }
    .code-block pre {
      padding: 1rem;
      padding-top: 2.75rem; /* Make space for button */
      font-family: 'Menlo', 'Consolas', monospace;
      font-size: 0.875rem; /* text-sm */
      overflow-x: auto;
      color: #e5e7eb; /* gray-200 */
    }
    .copy-code-btn {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      padding-left: 0.75rem;
      padding-right: 0.75rem;
      padding-top: 0.25rem;
      padding-bottom: 0.25rem;
      font-size: 0.875rem; /* text-sm */
      background-color: #374151; /* bg-gray-700 */
      color: #d1d5db; /* text-gray-300 */
      border-radius: 0.375rem; /* rounded-md */
      font-weight: 500;
      transition: background-color 0.2s;
    }
    .copy-code-btn:hover {
      background-color: #4b5563; /* bg-gray-600 */
    }
  </style>
</head>
<body class="bg-gray-950 text-white min-h-screen flex flex-col">

  <nav class="bg-gray-900 border-b border-gray-800 sticky top-0 z-30">
    <div class="w-full flex items-center justify-between px-4 py-3">
      <div class="flex items-center space-x-3">
        <a href="https://www.linkedin.com/in/chandler-prince-b53b1427/" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300" title="LinkedIn">
          <span id="nav-linkedin" class="w-6 h-6"></span>
        </a>
        <a href="https://github.com/DChandlerP/" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300" title="GitHub">
          <span id="nav-github" class="w-6 h-6"></span>
        </a>
      </div>
       <div class="flex flex-wrap justify-center space-x-2">
        <a href="index.html" class="flex items-center px-3 py-1 rounded text-blue-300 hover:bg-gray-800 hover:text-white font-semibold transition"><span id="nav-home" class="mr-1"></span>Home</a>
        <a href="threatmodel.html" class="flex items-center px-3 py-1 rounded text-blue-300 hover:bg-gray-800 hover:text-white font-semibold transition"><span id="nav-threat" class="mr-1"></span>Threat Model</a>
        <a href="checklist.html" class="flex items-center px-3 py-1 rounded text-blue-300 hover:bg-gray-800 hover:text-white font-semibold transition"><span id="nav-checklist" class="mr-1"></span>Checklist Generator</a>
        <a href="jwt.html" class="flex items-center px-3 py-1 rounded text-blue-300 hover:bg-gray-800 hover:text-white font-semibold transition"><span id="nav-jwt" class="mr-1"></span>JWT Decoder</a>
        <a href="fingerprint.html" class="flex items-center px-3 py-1 rounded text-blue-300 hover:bg-gray-800 hover:text-white font-semibold transition"><span id="nav-fp" class="mr-1"></span>Fingerprint Demo</a>
        <a href="epssdemo.html" class="flex items-center px-3 py-1 rounded text-blue-300 hover:bg-gray-800 hover:text-white font-semibold transition"><span id="nav-epss" class="mr-1"></span>EPSS Comparator</a>
        <a href="dashboard.html" class="flex items-center px-3 py-1 rounded text-blue-300 hover:bg-gray-800 hover:text-white font-semibold transition"><span id="nav-dashboard" class="mr-1"></span>Threat Dashboard</a>
        <a href="sast.html" class="flex items-center px-3 py-1 rounded text-blue-300 hover:bg-gray-800 hover:text-white font-semibold transition"><span id="nav-sast" class="mr-1"></span>SAST Guide</a>
      </div>
    </div>
  </nav>

  <header class="bg-gradient-to-r from-blue-900 to-gray-900 py-10 px-4 text-center shadow-lg">
    <h1 class="text-4xl md:text-5xl font-bold mb-2 text-white tracking-tight">Building Secure Containers: A Workshop</h1>
    <p class="max-w-2xl mx-auto text-gray-200 text-lg md:text-xl">
      A hands-on, project-based guide to building secure container images and understanding the risks of common anti-patterns.
    </p>
  </header>

  <main class="flex-1 px-4 py-10 max-w-5xl mx-auto w-full space-y-8">

    <section class="bg-gray-900 p-6 rounded-xl shadow-lg">
      <div class="flex items-center mb-2">
        <span id="icon-goal" class="mr-2"></span>
        <h2 class="text-2xl font-semibold text-blue-400">Project Goal</h2>
      </div>
      <p class="text-gray-200">
        This workshop will walk you through building a simple web application in two different ways. First, a <strong class="font-semibold text-blue-300">"naive" build</strong> that follows common but insecure practices. Second, a <strong class="font-semibold text-blue-300">"secure" build</strong> that implements critical security best practices.
        <br><br>
        The goal is to provide a tangible, side-by-side comparison. We will analyze both images to see the real-world differences in <strong class="font-semibold text-blue-300">image size</strong> and <strong class="font-semibold text-blue-300">vulnerability count</strong>, demonstrating why these best practices are essential for security.
      </p>
    </section>

    <section class="bg-gray-900 p-6 rounded-xl shadow-lg">
      <div class="flex items-center mb-2">
        <span id="icon-setup" class="mr-2"></span>
        <h2 class="text-2xl font-semibold text-blue-400">Step 1: Setup Your Environment</h2>
      </div>
      <p class="text-gray-200">
        Before you begin, you need a container engine. The easiest way to start is by installing <strong class="font-semibold text-blue-300">Docker Desktop</strong>, which works on Windows, macOS, and Linux. This will provide you with all the command-line tools we need, including `docker` and `docker scout`.
      </p>
      <a href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener" class="mt-4 inline-flex items-center px-4 py-2 bg-blue-700 hover:bg-blue-600 rounded text-white font-semibold transition shadow focus:outline-none w-max">
        Download Docker Desktop
      </a>
    </section>

    <section class="bg-gray-900 p-6 rounded-xl shadow-lg space-y-4">
      <div class="flex items-center mb-2">
        <span id="icon-files" class="mr-2"></span>
        <h2 class="text-2xl font-semibold text-blue-400">Step 2: Create the Project Files</h2>
      </div>
      <p class="text-gray-200">Create a new folder named `secure-container-project` and create two files inside it.</p>
      
      <h3 class="text-lg font-semibold text-blue-300">File 1: `app.py`</h3>
      <div class="code-block">
        <button class="copy-code-btn">Copy</button>
<pre><code>from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello from our container!'

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)</code></pre>
      </div>

      <h3 class="text-lg font-semibold text-blue-300">File 2: `requirements.txt`</h3>
      <div class="code-block">
        <button class="copy-code-btn">Copy</button>
<pre><code>Flask</code></pre>
      </div>
    </section>

    <section class="bg-gray-900 p-6 rounded-xl shadow-lg space-y-4">
      <div class="flex items-center mb-2">
        <span id="icon-naive" class="mr-2"></span>
        <h2 class="text-2xl font-semibold text-blue-400">Step 3: The 'Naive' Build (The Insecure Way)</h2>
      </div>
      <p class="text-gray-200">
        This first build works, but it violates several best practices:
      </p>
      <ul class="list-disc list-inside text-gray-300 pl-4 mt-2">
        <li>It uses a full Python base image, which includes an entire operating system and many unnecessary tools.</li>
        <li>It runs the application as the `root` user, a major security risk.</li>
        <li>It uses `COPY . .`, which can unintentionally copy sensitive files (like `.git` folders or secrets) into the image.</li>
      </ul>

      <h3 class="text-lg font-semibold text-blue-300">File 3: `Dockerfile`</h3>
      <div class="code-block">
        <button class="copy-code-btn">Copy</button>
<pre><code># Start from a full Red Hat UBI Python image
FROM registry.access.redhat.com/ubi9/python-311

WORKDIR /app

# Copy everything from our project folder into the image
COPY . .

# Run package installation as the default 'root' user
RUN pip install -r requirements.txt

EXPOSE 8080

# Run the app as root
CMD ["python", "app.py"]</code></pre>
      </div>

      <h3 class="text-lg font-semibold text-blue-300">Build and Run</h3>
      <p class="text-gray-200">In your terminal (in the project folder), run the build command:</p>
      <div class="code-block">
        <button class="copy-code-btn">Copy</button>
<pre><code>docker build -t naive-image .</code></pre>
      </div>
      <p class="text-gray-200">Then, run the container:</p>
      <div class="code-block">
        <button class="copy-code-btn">Copy</button>
<pre><code>docker run --rm -p 8081:8080 naive-image</code></pre>
      </div>
      <p class="text-gray-200">You can now visit <code class="bg-gray-800 text-blue-300 p-1 rounded">http://localhost:8081</code> in your browser to see it work!</p>
    </section>

    <section class="bg-gray-900 p-6 rounded-xl shadow-lg space-y-4">
      <div class="flex items-center mb-2">
        <span id="icon-secure" class="mr-2"></span>
        <h2 class="text-2xl font-semibold text-blue-400">Step 4: The 'Secure' Build (Best Practices)</h2>
      </div>
      <p class="text-gray-200">
        Now, let's create a secure version. This `Dockerfile` uses <strong class="font-semibold text-blue-300">multi-stage builds</strong> to separate build-time needs from runtime.
      </p>
      <ul class="list-disc list-inside text-gray-300 pl-4 mt-2">
        <li><strong>Stage 1 (builder):</strong> Uses the full Python image to install dependencies into a temporary directory.</li>
        <li><strong>Stage 2 (final):</strong> Uses a <strong class="font-semibold text-blue-300">minimal base image</strong> (`ubi-minimal`) which contains almost nothing except the bare essentials.</li>
        <li>It creates a dedicated non-root user (`appuser`) and runs the application as that user.</li>
        <li>It specifically copies only the required files from the builder stage and the project.</li>
      </ul>

      <h3 class="text-lg font-semibold text-blue-300">File 4: `Dockerfile.secure`</h3>
      <div class="code-block">
        <button class="copy-code-btn">Copy</button>
<pre><code># === Stage 1: The Builder ===
FROM registry.access.redhat.com/ubi9/python-311 AS builder

WORKDIR /build

# Copy only the requirements file first to optimize caching
COPY requirements.txt .

# Install dependencies into a temporaryW