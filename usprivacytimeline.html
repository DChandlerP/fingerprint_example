<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>US Privacy Timeline: Laws & Cases</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind Configuration (can be removed if relying on default styles) -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gray: {
                            850: '#1f2937',
                            // 900 is already a default color
                            950: '#030712',
                        },
                        // Legislation Color (Teal/Emerald)
                        emerald: { // Note: Tailwind includes emerald by default
                            450: '#10b981', 
                        },
                        // Jurisprudence Color (Indigo/Blue)
                        indigo: {
                            450: '#6366f1',
                        }
                    },
                    fontFamily: {
                        sans: ['sans-serif'], // Using default sans-serif
                    }
                }
            }
        }
    </script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: sans-serif;
        }
        /* Timeline Central Line */
        .timeline-line::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, transparent, #374151 5%, #374151 95%, transparent);
            z-index: 0;
        }

        /* Mobile Timeline Line adjustment */
        @media (max-width: 768px) {
            .timeline-line::before {
                left: 24px; /* Align with icons on left */
            }
        }

        /* Card Animations */
        .timeline-item {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .timeline-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #030712; 
        }
        ::-webkit-scrollbar-thumb {
            background: #374151; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #4b5563; 
        }
    </style>
</head>
<body class="bg-gray-950 text-gray-200 min-h-screen flex flex-col">

    <!-- Navigation Bar -->
    <nav class="bg-gray-900 border-b border-gray-800 sticky top-0 z-40">
      <div class="w-full flex items-center justify-center px-6 py-3">
         <!-- Main navigation container -->
         <div class="flex flex-wrap justify-center space-x-4">
          
          <!-- Home Link (Inactive) -->
          <a href="index.html" class="flex items-center px-3 py-1 rounded text-blue-300 hover:bg-gray-800 hover:text-white font-semibold transition">
            <span id="nav-home" class="mr-1"></span>Home
          </a>

          <!-- Guides & Case Studies Dropdown (Active) -->
          <div class="relative group">
            <!-- Dropdown Trigger -->
            <button class="flex items-center px-3 py-1 rounded text-white bg-blue-700 font-semibold transition">
              <span id="nav-guides-trigger" class="mr-1"></span>
              Guides & Case Studies
              <span id="nav-guides-chevron" class="ml-1"></span>
            </button>
            
            <!-- Dropdown Menu -->
            <div class="absolute left-0 mt-1 w-56 rounded-md shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200" style="z-index: 50;">
              <div class="py-1" role="menu" aria-orientation="vertical">
                <a href="regulation.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-regulation" class="mr-2"></span>Regulation (US/EU)
                </a>
                <a href="usprivacytimeline.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-privacy" class="mr-2"></span>US Privacy Timeline
                </a>
                <a href="cloud.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-cloud" class="mr-2"></span>Cloud
                </a>
                <a href="cyber_roadmap.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-roadmap" class="mr-2"></span>Cyber Roadmap
                </a>
                <a href="phishing.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-phishing" class="mr-2"></span>Phishing
                </a>
                <a href="sast.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-sast" class="mr-2"></span>SAST
                </a>
                <a href="threatmodel.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-threat" class="mr-2"></span>Threat Model
                </a>
                <a href="fair.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                    <span id="nav-fair" class="mr-2"></span>FAIR Risk Scoring
                  </a>
                  <a href="sdlc.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                      <span id="nav-sdlc" class="mr-2"></span>Secure SDLC
                  </a>
              </div>
            </div>
          </div>

          <!-- Tools & Demos Dropdown (Inactive) -->
          <div class="relative group">
            <!-- Dropdown Trigger -->
            <button class="flex items-center px-3 py-1 rounded text-blue-300 hover:bg-gray-800 hover:text-white font-semibold transition">
              <span id="nav-tools-trigger" class="mr-1"></span>
              Tools & Demos
              <span id="nav-tools-chevron" class="ml-1"></span>
            </button>
            
            <!-- Dropdown Menu -->
            <div class="absolute left-0 mt-1 w-56 rounded-md shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200" style="z-index: 50;">
              <div class="py-1" role="menu" aria-orientation="vertical">
                <a href="checklist.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-checklist" class="mr-2"></span>Checklist
                </a>
                <a href="epssdemo.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-epss" class="mr-2"></span>CVSS vs EPSS
                </a>
                <a href="encryption.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-encryption" class="mr-2"></span>Encryption
                </a>
                <a href="fingerprint.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-fp" class="mr-2"></span>Fingerprinting
                </a>
                <a href="jwt.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-jwt" class="mr-2"></span>JWT Decoder
                </a>
                <a href="modcat.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-modcat" class="mr-2"></span>PRS MODCAT
                </a>
                <a href="shamir.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-shamir" class="mr-2"></span>Shamir's Visualizer
                </a>
                <a href="dashboard.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                  <span id="nav-dashboard" class="mr-2"></span>Threat Intel
                </a>
                 <a href="string.html" class="flex items-center px-4 py-2 text-sm text-blue-200 hover:bg-gray-700 hover:text-white" role="menuitem">
                    <span id="nav-stringart" class="mr-2"></span>String Art
                  </a>
              </div>
            </div>
          </div>
          
        </div>
      </div>
  </nav>

    <!-- Main Content -->
    <main class="flex-1 pt-12 pb-20 px-4 sm:px-6">
        <div class="max-w-5xl mx-auto">
            
            <!-- Intro Section -->
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">United States Privacy Landscape</h2>
                <p class="text-gray-400 max-w-2xl mx-auto mb-8">From the "Third-Party Doctrine" to the USA FREEDOM Act, explore the evolution of American surveillance law and constitutional rights.</p>
                
                <!-- Filters -->
                <div class="inline-flex bg-gray-900 p-1 rounded-xl border border-gray-800 shadow-lg">
                    <button onclick="filterTimeline('all')" class="filter-btn px-5 py-2 rounded-lg text-sm font-medium transition-all bg-indigo-600 text-white shadow-md" data-filter="all">
                        All Events
                    </button>
                    <button onclick="filterTimeline('law')" class="filter-btn px-5 py-2 rounded-lg text-sm font-medium text-gray-400 hover:text-white transition-all" data-filter="law">
                        US Legislation
                    </button>
                    <button onclick="filterTimeline('case')" class="filter-btn px-5 py-2 rounded-lg text-sm font-medium text-gray-400 hover:text-white transition-all" data-filter="case">
                        Court Cases
                    </button>
                </div>
            </div>

            <!-- Timeline Container -->
            <div class="relative timeline-line py-4" id="timeline-container">
                <!-- Items will be injected here by JS -->
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="hidden text-center py-20">
                <i data-lucide="search-x" class="w-12 h-12 text-gray-600 mx-auto mb-4"></i>
                <p class="text-gray-400">No events found for this filter.</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="border-t border-gray-800 py-8 mt-auto bg-gray-900">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="text-gray-500 text-sm">&copy; 2025 D. Chandler Prince</p>
        </div>
    </footer>

    <!-- Modal -->
    <div id="detailsModal" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-black/80 backdrop-blur-sm transition-opacity opacity-0" id="modalBackdrop"></div>
        
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-gray-900 border border-gray-800 text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-lg opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" id="modalPanel">
                    
                    <div class="relative">
                        <!-- Header/Banner -->
                        <div class="h-32 bg-gradient-to-r from-gray-800 to-gray-900 p-6 flex items-end" id="modalHeaderBg">
                            <div class="absolute top-4 right-4">
                                <button onclick="closeModal()" class="text-gray-400 hover:text-white bg-black/20 hover:bg-black/40 rounded-full p-1 transition-colors">
                                    <i data-lucide="x" class="w-5 h-5"></i>
                                </button>
                            </div>
                            <div>
                                <span id="modalYear" class="inline-block px-2 py-1 rounded text-xs font-bold bg-black/30 text-white backdrop-blur-md mb-2"></span>
                                <h3 class="text-2xl font-bold text-white" id="modalTitle"></h3>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="px-6 py-6">
                            <div class="flex items-center space-x-2 mb-4">
                                <i id="modalIcon" class="w-5 h-5"></i>
                                <span id="modalType" class="text-sm font-medium uppercase tracking-wide"></span>
                            </div>
                            
                            <p class="text-gray-300 leading-relaxed mb-6" id="modalDesc"></p>
                            
                            <div class="bg-gray-950/50 rounded-xl p-4 border border-gray-800">
                                <h4 class="text-sm font-semibold text-white mb-2 flex items-center">
                                    <i data-lucide="zap" class="w-4 h-4 mr-2 text-yellow-500"></i>
                                    Impact on Privacy
                                </h4>
                                <p class="text-sm text-gray-400" id="modalImpact"></p>
                            </div>
                        </div>

                        <!-- Footer -->
                        <div class="bg-gray-900 px-6 py-4 sm:flex sm:flex-row-reverse border-t border-gray-800">
                            <button type="button" onclick="closeModal()" class="inline-flex w-full justify-center rounded-lg bg-gray-800 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-700 sm:ml-3 sm:w-auto transition-colors border border-gray-700">Close Details</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- US Specific Data Source ---
        const timelineData = [
            {
                id: 1,
                year: 1928,
                title: 'Olmstead v. United States',
                type: 'case',
                icon: 'gavel',
                shortDesc: 'Supreme Court rules wiretapping is not a "search" if no physical trespass occurs.',
                fullDesc: 'A landmark Prohibition-era case where the Supreme Court held that wiretapping private telephone conversations did not violate the Fourth Amendment unless federal agents physically trespassed on the property. This established the "property-based" approach to privacy.',
                impact: 'Narrowed the Fourth Amendment for nearly 40 years, allowing the government to intercept communications without warrants as long as they didn\'t enter a building.',
                color: 'indigo'
            },
            {
                id: 2,
                year: 1967,
                title: 'Katz v. United States',
                type: 'case',
                icon: 'gavel',
                shortDesc: 'Established the "Reasonable Expectation of Privacy" standard.',
                fullDesc: 'The Supreme Court overruled Olmstead, declaring that the Fourth Amendment protects "people, not places." The ruling involved a listening device on a public phone booth. Justice Harlan\'s concurrence introduced the two-part test for a "reasonable expectation of privacy."',
                impact: 'The foundation of modern US privacy law: The police need a warrant if a person expects privacy and society views that expectation as reasonable.',
                color: 'indigo'
            },
            {
                id: 3,
                year: 1974,
                title: 'Privacy Act of 1974',
                type: 'law',
                icon: 'scale',
                shortDesc: 'Governs collection and use of records by federal agencies.',
                fullDesc: 'Passed post-Watergate, this law prevents federal agencies from disclosing records to other agencies or persons without the written consent of the individual, with some exceptions. It also grants citizens the right to see their own files.',
                impact: 'Established fair information practices for the federal government, though it notably does not apply to the private sector or state governments.',
                color: 'emerald'
            },
            {
                id: 4,
                year: 1978,
                title: 'FISA Enacted',
                type: 'law',
                icon: 'eye',
                shortDesc: 'Foreign Intelligence Surveillance Act sets rules for spying.',
                fullDesc: 'Established the FISC (secret court) to oversee requests for surveillance warrants against foreign spies inside the United States. It was a response to revelations of domestic spying by the CIA and FBI during the Civil Rights era.',
                impact: 'Created a separate legal track for "national security" surveillance, distinct from standard criminal law.',
                color: 'emerald'
            },
            {
                id: 5,
                year: 1979,
                title: 'Smith v. Maryland',
                type: 'case',
                icon: 'phone',
                shortDesc: 'Established the "Third-Party Doctrine."',
                fullDesc: 'The Court ruled that police do not need a warrant to use a pen register (a device that records phone numbers dialed). The reasoning: you voluntarily give that data to the phone company, so you have no expectation of privacy in it.',
                impact: 'A massive blow to privacy. It allows the government to access bank records, phone logs, and ISP metadata without a warrant, arguing you "shared" it with a business.',
                color: 'indigo'
            },
            {
                id: 6,
                year: 1986,
                title: 'ECPA Passed',
                type: 'law',
                icon: 'server',
                shortDesc: 'Electronic Communications Privacy Act.',
                fullDesc: 'Updated wiretap laws for the computer age. It protects email, pager, and cell phone calls. However, it contains the "180-day rule," allowing government access to emails older than 180 days with a mere subpoena rather than a warrant.',
                impact: 'Extended wiretap protections to digital comms, but its outdated provisions are still debated today regarding cloud storage.',
                color: 'emerald'
            },
            {
                id: 7,
                year: 1996,
                title: 'HIPAA',
                type: 'law',
                icon: 'activity',
                shortDesc: 'Health Insurance Portability and Accountability Act.',
                fullDesc: 'The first national standard for the protection of health information. It required the Department of Health and Human Services to establish national standards for electronic health care transactions and national identifiers.',
                impact: 'Defined PHI (Protected Health Information) and strictly limited how doctors and insurers could share medical data.',
                color: 'emerald'
            },
            {
                id: 8,
                year: 1998,
                title: 'COPPA',
                type: 'law',
                icon: 'baby',
                shortDesc: 'Children\'s Online Privacy Protection Act.',
                fullDesc: 'Requires websites to get parental consent before collecting data from children under 13. It dictates what must be included in a privacy policy and when and how to seek verifiable consent from a parent.',
                impact: 'Changed the internet landscape; many platforms (like Facebook/TikTok) restrict users under 13 entirely to avoid compliance costs.',
                color: 'emerald'
            },
            {
                id: 9,
                year: 2001,
                title: 'USA PATRIOT Act',
                type: 'law',
                icon: 'siren',
                shortDesc: 'Sweeping expansion of surveillance post-9/11.',
                fullDesc: 'Passed weeks after 9/11, it broke down the "wall" between intelligence and criminal investigations. Section 215 allowed the FBI to order any person to produce "tangible things" (books, records, papers) relevant to an investigation.',
                impact: 'Used famously by the NSA to justify the bulk collection of millions of American phone records (metadata), later revealed by Edward Snowden.',
                color: 'emerald'
            },
            {
                id: 10,
                year: 2012,
                title: 'United States v. Jones',
                type: 'case',
                icon: 'map-pin',
                shortDesc: 'GPS tracking constitutes a search.',
                fullDesc: 'Police attached a GPS tracker to a suspect\'s Jeep without a valid warrant and tracked him for 28 days. The Court ruled this was a physical trespass onto "effects" protected by the 4th Amendment.',
                impact: 'Signaled the Court was ready to update privacy protections for modern technology, moving back slightly toward the property-based theory.',
                color: 'indigo'
            },
            {
                id: 11,
                year: 2014,
                title: 'Riley v. California',
                type: 'case',
                icon: 'smartphone',
                shortDesc: 'Police need a warrant to search a cell phone incident to arrest.',
                fullDesc: 'Chief Justice Roberts wrote that modern cell phones are not just "containers" but hold the "privacies of life." Therefore, police cannot search the digital contents of a phone simply because they arrested the owner.',
                impact: 'A major victory for digital privacy, recognizing that data on a device requires higher protection than physical objects in a pocket.',
                color: 'indigo'
            },
            {
                id: 12,
                year: 2015,
                title: 'USA FREEDOM Act',
                type: 'law',
                icon: 'shield-alert',
                shortDesc: 'Ended bulk collection of phone metadata.',
                fullDesc: 'Passed in response to the Snowden leaks, this act rolled back parts of the PATRIOT Act. It explicitly banned the bulk collection of Americans\' telephone records and internet metadata by the NSA. Instead, phone companies retain the data, and the NSA must request specific records.',
                impact: 'The first major legislative rollback of surveillance powers in decades, shifting data retention from the government back to private providers.',
                color: 'emerald'
            },
            {
                id: 13,
                year: 2018,
                title: 'Carpenter v. United States',
                type: 'case',
                icon: 'wifi',
                shortDesc: 'Warrant required for historical cell-site location info (CSLI).',
                fullDesc: 'The Court ruled that accessing weeks of historical location records from cell towers constitutes a search. It narrowed the Third-Party Doctrine, stating that just because data is held by a phone company doesn\'t mean the user surrendered all privacy rights.',
                impact: 'A massive check on the Third-Party Doctrine. It suggests that highly revealing digital aggregations (like location history) are protected even if third parties hold them.',
                color: 'indigo'
            },
            {
                id: 14,
                year: 2020,
                title: 'CCPA Enforced',
                type: 'law',
                icon: 'sun',
                shortDesc: 'California Consumer Privacy Act.',
                fullDesc: 'While a state law, the CCPA effectively set a national standard due to California\'s market size. It grants rights to know what data is collected, delete it, and opt-out of its sale. It was followed by the CPRA (Prop 24) which added "sensitive" data categories.',
                impact: 'Forced US companies to add "Do Not Sell My Info" buttons and treat data privacy as a user right, filling the gap left by the lack of a federal privacy law.',
                color: 'emerald'
            }
        ];

        // --- DOM Elements ---
        const timelineContainer = document.getElementById('timeline-container');
        const filterBtns = document.querySelectorAll('.filter-btn');
        
        // --- Modal Elements ---
        const modal = document.getElementById('detailsModal');
        const modalBackdrop = document.getElementById('modalBackdrop');
        const modalPanel = document.getElementById('modalPanel');
        const modalYear = document.getElementById('modalYear');
        const modalTitle = document.getElementById('modalTitle');
        const modalDesc = document.getElementById('modalDesc');
        const modalImpact = document.getElementById('modalImpact');
        const modalIcon = document.getElementById('modalIcon');
        const modalType = document.getElementById('modalType');

        // --- Logic ---
        
        function renderTimeline(filter = 'all') {
            timelineContainer.innerHTML = '';
            
            const filteredData = filter === 'all' 
                ? timelineData 
                : timelineData.filter(item => item.type === filter);

            if (filteredData.length === 0) {
                document.getElementById('empty-state').classList.remove('hidden');
                return;
            } else {
                document.getElementById('empty-state').classList.add('hidden');
            }

            filteredData.forEach((item, index) => {
                // Alternate left/right on desktop
                const isLeft = index % 2 === 0;
                const sideClass = isLeft ? 'md:flex-row-reverse' : 'md:flex-row';
                const textAlignment = isLeft ? 'md:text-right' : 'md:text-left';
                const alignStart = isLeft ? 'md:items-end' : 'md:items-start';
                
                // Colors based on type
                const colorClass = item.type === 'law' ? 'text-emerald-400 bg-emerald-500/10 border-emerald-500/20' : 'text-indigo-400 bg-indigo-500/10 border-indigo-500/20';
                const btnClass = item.type === 'law' ? 'text-emerald-400 hover:bg-emerald-500/20' : 'text-indigo-400 hover:bg-indigo-500/20';
                const dotColor = item.type === 'law' ? 'bg-emerald-500' : 'bg-indigo-500';

                const el = document.createElement('div');
                el.className = `timeline-item flex flex-row ${sideClass} items-center justify-between w-full mb-8`;
                
                // Inner HTML
                el.innerHTML = `
                    <!-- Spacer for Layout Balance -->
                    <div class="hidden md:block w-5/12"></div>
                    
                    <!-- Center Dot -->
                    <div class="z-10 flex items-center justify-center w-8 h-8 rounded-full bg-gray-900 border-2 border-gray-700 shadow-lg shrink-0 mx-4 md:mx-0 relative">
                        <div class="w-3 h-3 rounded-full ${dotColor}"></div>
                    </div>

                    <!-- Content Card -->
                    <div class="w-[calc(100%-4rem)] md:w-5/12 bg-gray-900 border border-gray-800 p-5 rounded-xl shadow-lg hover:border-gray-700 transition-all group">
                        <div class="flex flex-col ${alignStart}">
                            <span class="text-xs font-bold tracking-widest uppercase ${colorClass} px-2 py-1 rounded mb-2 inline-block">
                                ${item.year}
                            </span>
                            <div class="flex items-center gap-2 mb-1 ${isLeft ? 'md:flex-row-reverse' : ''}">
                                <i data-lucide="${item.icon}" class="w-5 h-5 ${item.type === 'law' ? 'text-emerald-500' : 'text-indigo-500'}"></i>
                                <h3 class="text-lg font-bold text-white">${item.title}</h3>
                            </div>
                            <p class="text-gray-400 text-sm mb-4 ${textAlignment}">${item.shortDesc}</p>
                            <button onclick="openDetails(${item.id})" class="text-xs font-semibold uppercase tracking-wider ${btnClass} py-1 px-2 rounded transition-colors flex items-center gap-1">
                                View Details <i data-lucide="arrow-right" class="w-3 h-3"></i>
                            </button>
                        </div>
                    </div>
                `;
                timelineContainer.appendChild(el);
            });

            // Initialize Icons
            lucide.createIcons();
            
            // Trigger animations
            observeItems();
        }

        function filterTimeline(type) {
            // Update Active Button State
            filterBtns.forEach(btn => {
                if(btn.dataset.filter === type) {
                    btn.classList.remove('bg-transparent', 'text-gray-400');
                    btn.classList.add('bg-indigo-600', 'text-white', 'shadow-md');
                } else {
                    btn.classList.add('bg-transparent', 'text-gray-400');
                    btn.classList.remove('bg-indigo-600', 'text-white', 'shadow-md');
                }
            });
            renderTimeline(type);
        }

        // --- Animation Observer ---
        function observeItems() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.timeline-item').forEach(item => {
                observer.observe(item);
            });
        }

        // --- Modal Functions ---
        window.openDetails = function(id) {
            const item = timelineData.find(d => d.id === id);
            if (!item) return;

            modalYear.innerText = item.year;
            modalTitle.innerText = item.title;
            modalDesc.innerText = item.fullDesc;
            modalImpact.innerText = item.impact;
            
            // Icon and Type setup
            modalIcon.setAttribute('data-lucide', item.icon);
            modalType.innerText = item.type === 'law' ? 'Legislation' : 'Supreme Court Case';
            
            // Dynamic Coloring
            if (item.type === 'law') {
                modalType.className = "text-sm font-medium uppercase tracking-wide text-emerald-400";
                modalIcon.className = "w-5 h-5 text-emerald-400";
            } else {
                modalType.className = "text-sm font-medium uppercase tracking-wide text-indigo-400";
                modalIcon.className = "w-5 h-5 text-indigo-400";
            }

            modal.classList.remove('hidden');
            lucide.createIcons(); // Refresh modal icon

            // Animate In
            setTimeout(() => {
                modalBackdrop.classList.remove('opacity-0');
                modalPanel.classList.remove('opacity-0', 'translate-y-4', 'sm:translate-y-0', 'sm:scale-95');
            }, 10);
        };

        window.closeModal = function() {
            modalBackdrop.classList.add('opacity-0');
            modalPanel.classList.add('opacity-0', 'translate-y-4', 'sm:translate-y-0', 'sm:scale-95');
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        };

        // Close on Backdrop Click
        modal.addEventListener('click', (e) => {
            if (e.target === modalBackdrop || e.target.closest('.fixed.inset-0') === e.target) {
                closeModal();
            }
        });

        // --- Initial Render ---
        document.addEventListener('DOMContentLoaded', () => {
            renderTimeline('all');

            // --- Nav Bar Icons & Logic ---
            lucide.createIcons({
              icons: {
                'nav-home': lucide.Home,
                'nav-guides-trigger': lucide.BookOpen,
                'nav-tools-trigger': lucide.Briefcase,
                'nav-guides-chevron': lucide.ChevronDown,
                'nav-tools-chevron': lucide.ChevronDown,
                'nav-phishing': lucide.Fish, 
                'nav-cloud': lucide.Cloud,
                'nav-sast': lucide.FileSearch,
                'nav-threat': lucide.ShieldAlert,
                'nav-checklist': lucide.ListChecks,
                'nav-jwt': lucide.KeyRound,
                'nav-encryption': lucide.Lock, 
                'nav-fp': lucide.Fingerprint,
                'nav-epss': lucide.Activity,
                'nav-dashboard': lucide.LayoutDashboard,
                'nav-modcat': lucide.Guitar,
                'nav-roadmap': lucide.Map,
                'nav-shamir': lucide.Share2,
                'nav-regulation': lucide.Gavel,
                'nav-privacy': lucide.Flag, // New icon for this page
                'nav-fair': lucide.Banknote,
                'nav-sdlc': lucide.IterationCcw,
                'nav-stringart': lucide.GalleryVertical,
              },
              attrs: { color: "#38bdf8", size: 20, strokeWidth: 2 }
            });

            const dropdownButtons = document.querySelectorAll('.group > button');
            dropdownButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const dropdownMenu = e.currentTarget.nextElementSibling;
                    document.querySelectorAll('.group .absolute').forEach(menu => {
                        if (menu !== dropdownMenu) menu.classList.add('opacity-0', 'invisible');
                    });
                    dropdownMenu.classList.toggle('opacity-0');
                    dropdownMenu.classList.toggle('invisible');
                });
            });
            window.addEventListener('click', (e) => {
                if (!e.target.closest('.group')) document.querySelectorAll('.group .absolute').forEach(menu => menu.classList.add('opacity-0', 'invisible'));
            });
        });

    </script>
</body>
</html>